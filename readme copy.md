# 1.1.0 개선 완료 내용

1. app.js 리팩토링
    1) helmet, session 부분 app.js에서 middlewares 폴더에에 helmet.js, session.js로 분리
    2) db connection 부분 app.js에서 config 폴더 db.js 로 분리
    3) middeware.js 내용을 middlewares 폴더에 기능에 따라 분리 후 index.js에서 분리된 파일의 모든 미들웨어를 통합
        - 인증 관련 (isLoggedIn, storeReturnTo) → auth.js, 
        - 데이터 검증 관련 (validateCampground, validateReview) → validators.js
        - 권한 확인 관련 (isAuthor, isReviewAuthor) → permissions.js
    4) app.js의 home 페이지 render router를 routes 및 controllers 폴더의 home.js로 분리리

2. 기타 수정사항
    1) /register에서 /login 호출 및 로그인 후에 /campgrounds로 이동되게 수정 (사용자 요청 URL 리디렉션 저장에서 /register path 제외)

3. Favicon 추가
    1) /public/favicon 폴더 작성 및 favicon 파일 추가
    2) /views/partials/favicon.ejs 작성 및 home.ejs와 boilerplate.ejs에 추가가

4. default image 추가
    1) campground index, show 페이지에 등록된 사진이 없을 경우 default image(/public/images/default-image.jpg)를 표시

5. Search 기능 추가
    1) MongoDB $text 기준 검색(title, descriptions)

6. HOME 개선
    1) 스타일 개선
    2) home, campgrounds 버튼 삭제

7. 캠프그라운드 및 리뷰 작성일자, 업데이트일자 추가

8. 리뷰 수 및 평균 Rating 표시

9. 포스트 및 리뷰 최신순 정렬렬
    
추가 개선 사항

포스트 사진 수

Jest로 test?
구글서치 등록?
구글 아날리시스 등록?

register 페이지
아이디, 이메일 회원 가입시 중복 검사
이메일로 검증 후 최초 로그인인

User account 정보관리 페이지 신설
 회원 정보 변경 - 이메일, 비밀번호 변경
 본인 게시글, 리뷰 확인
 다른 사용자가 작성자 클릭 시 게시글, 리뷰 확인, 인스턴트 메시지 보내기?

외부계정정보로 로그인: 구글, 페이스북, 깃 가입정보로 로그인

사진 관리 관련
 업로드 사진 없을 경우 디폴트 사진 설정 - index는 OK, show 페이지도?
 파일 업로드 시 파일명, 사이즈 등 표시, 삭제 버튼 등
  사진 관리 라이브러리? 사진 자유롭게 빼거나 추가, 편집 가능?
 cloudinary 사진 업로드 시 자동 최적화/사이즈변경 추가? 보통 필요한지?
        transformation: [
            { fetch_format: 'auto', quality: 'auto' }, // 최적화
            { width: 300, height: 200, crop: 'auto', gravity: 'auto' } // 자동 크롭
        ]

index 페이지
 클러스트 지도 팝업에서 이미지 및 show 페이지 링크 연결 완료 -> 스타일 개선?

show 페이지
 사진 몇 장 있는지 보여주기

new 페이지
 주소 입력 - 지도에서 선택 가능? 일본 주소체계?
    일본 맵 매칭
 캠프그라운드 정보 있는지? 가상 데이터 생성?
 실제 일본 캠프장 정보
 mapbox 일본 주소체계 대응된다고 적혀있는데 어떤 의미?

edit 페이지
 사진 관리 라이브러리? 사진 자유롭게 빼거나 추가, 편집 가능?

review 페이지
 리뷰도 업데이트 가능하게

삭제 페이지
 삭제 시 cloudinary 파일도 함께 삭제?

보안/유효성 검사
 이미지 유효성 검사 필요 image: Joi.string().uri().required(),

## 현재 시스템에서 실현 가능한 항목과 그 구현 난이도를 검토

 1. 코드 리팩터링 - OK
가능성: 매우 높음
app.js에 있는 코드(예: DB 연결, 미들웨어 설정, 세션 설정, Helmet 등)를 별도의 모듈로 분리하면 코드가 더욱 유지보수하기 쉬워집니다.
난이도: 쉬움
Node.js의 require 또는 import/export를 사용하여 모듈화 작업을 수행할 수 있습니다.

2. Favicon 설정 - OK
가능성: 매우 높음
favicon.ico 파일을 추가하고 Express 앱에서 해당 파일을 서빙하도록 설정하면 됩니다.
난이도: 매우 쉬움
Express의 기본 정적 파일 제공 기능(express.static)을 사용하면 간단히 구현할 수 있습니다.

3. 구글 서치 및 애널리틱스 등록 - 하기 전에 구글 도메인 등록 진행행
가능성: 매우 높음
Google Analytics를 추가하고 사이트를 Google Search Console에 등록하면 구현 가능합니다.
난이도: 쉬움
HTML에 Google Analytics 스니펫 코드를 삽입하는 방식으로 손쉽게 적용 가능합니다.

4. 유저 신규 가입 시 중복 확인
가능성: 높음
클라이언트에서 입력값을 서버로 비동기 전송하여 ID와 이메일 중복 여부를 확인할 수 있습니다.
난이도: 중간
비동기 통신(예: AJAX 또는 Fetch API) 및 서버 측 검증 로직 추가가 필요합니다.

5. 이메일 검증 (이메일 인증)
가능성: 높음
사용자 가입 시 이메일 인증 링크를 보내고, 링크를 클릭해야 가입이 완료되도록 구현할 수 있습니다.
난이도: 중간
이메일 전송을 위해 NodeMailer 또는 SendGrid와 같은 라이브러리를 사용할 수 있습니다.

6. 유저정보 페이지 추가
가능성: 높음
사용자 프로필 페이지를 추가하고, 이메일 및 비밀번호 변경 기능을 제공할 수 있습니다.
난이도: 중간
비밀번호 변경 시 추가적인 보안 처리가 필요합니다(bcrypt로 해싱 등).

7. 유저정보 페이지에서 본인이 작성한 캠프장 및 리뷰 조회
가능성: 높음
데이터베이스 쿼리를 통해 특정 사용자가 작성한 캠프장 및 리뷰를 조회 가능.
난이도: 중간
Mongoose에서 관계형 데이터를 쿼리하는 로직 작성이 필요합니다.

8. OAuth 가입 (구글, 페이스북 등)
가능성: 높음
Passport.js와 Google/Facebook OAuth 전략을 사용해 구현 가능합니다.
난이도: 중간에서 어려움
외부 OAuth 인증 시스템과의 연동 및 기존 사용자 인증 흐름과의 통합이 필요합니다.

9. 사진 업로드 시 관리 도구 추가
가능성: 높음
사진 드래그 앤 드롭, 추가/삭제, 프리뷰 기능을 추가할 수 있습니다.
난이도: 어려움
클라이언트에서 JavaScript 라이브러리(예: Dropzone.js)를 사용하고, 업로드된 이미지를 실시간으로 미리보기 처리해야 합니다.

10. 캠프장 조회 시 사진 수, 리뷰 수, 평균 평점 표시 - OK (사진 수는 아직 미구현)
가능성: 매우 높음
데이터베이스에서 집계 데이터를 가져와 표시하면 간단히 구현 가능합니다.
난이도: 쉬움
Mongoose의 집계 기능(aggregation)을 사용하거나 각 캠프장 데이터에 계산된 필드를 추가합니다.

11. 캠프장 등록/수정 시 일시 저장
가능성: 중간
사용자가 작성 중인 데이터를 세션 또는 로컬스토리지에 임시로 저장하고 복구할 수 있도록 구현할 수 있습니다.
난이도: 어려움
클라이언트와 서버 간 동기화 및 데이터 복구 로직이 필요합니다.

12. 캠프장 등록, 리뷰 등록 시 등록 시점 저장  - OK
가능성: 매우 높음
MongoDB 문서에 timestamp 필드를 추가하면 간단히 구현할 수 있습니다.
난이도: 매우 쉬움
MongoDB의 기본 Date 필드를 활용하면 됩니다.

13. 리뷰 내용 업데이트 기능
가능성: 높음
사용자가 작성한 리뷰를 수정 가능하도록 UI와 API를 추가하면 됩니다.
난이도: 중간
수정 권한 확인 로직과 UI/UX 설계가 필요합니다.

14. 이미지 유효성 검사
가능성: 매우 높음
업로드된 이미지의 파일 형식, 크기, 해상도 등을 검증할 수 있습니다.
난이도: 쉬움
Multer와 Cloudinary에서 제공하는 검증 기능을 활용할 수 있습니다.

15. 캠프장 정보 삭제 시 Cloudinary 사진도 함께 삭제
가능성: 매우 높음
캠프장 삭제 API에서 Cloudinary의 사진 삭제 API를 호출하면 가능합니다.
난이도: 쉬움
Cloudinary SDK를 통해 연결된 이미지를 삭제합니다.

16. 주소 입력 시 지도 표시 및 지도에서 직접 지정
가능성: 중간
주소 입력과 동시에 Mapbox API를 호출해 지도를 업데이트하거나, 지도 상에서 위치를 선택하는 기능을 구현할 수 있습니다.
난이도: 어려움
클라이언트와 서버 간의 지도 데이터 통신과 실시간 UI 업데이트가 필요합니다.

17. 검색 기능: 캠프장 이름 및 위치를 기준으로 검색 - OK
가능성: 높음
MongoDB에서 $text 인덱스(이름/설명 검색)와 $geoWithin(위치 기반 검색)을 활용하면 구현 가능합니다.
클라이언트에서 필터링 UI를 제공하고, 서버에서 쿼리 파라미터를 처리하면 됩니다.
난이도: 낮음~중간
기본적인 검색은 간단하지만, 검색 속도 최적화나 위치 기반 필터링(거리 기준 검색) 등을 추가하면 난이도가 약간 증가합니다.

18. 이미지 갤러리: 다중 이미지 업로드 및 갤러리 뷰 제공
가능성: 높음
현재 Cloudinary를 사용 중이므로 다중 이미지 업로드를 지원하는 클라이언트/서버 로직 추가만 필요합니다.
프론트엔드에서 이미지 갤러리 라이브러리(예: Lightbox.js, React Image Gallery)와 연결하면 갤러리 뷰를 쉽게 구현할 수 있습니다.
난이도: 중간
다중 이미지 업로드 시 파일 크기, 형식, 갯수 제한을 처리하는 서버 로직과 유효성 검사가 필요합니다.
사용자가 이미지를 추가/삭제/미리보기할 수 있는 UI 구성도 포함됩니다.

19. 알림 시스템: 사용자 활동에 따른 실시간 알림 추가
가능성: 중간
Socket.io나 Pusher 같은 실시간 이벤트 라이브러리를 활용하여 알림 시스템을 구현할 수 있습니다.
서버에서 알림 이벤트를 발행하고, 클라이언트에서 이를 구독(subscribe)하도록 설계합니다.
예를 들어, 리뷰가 작성되었을 때 캠프장 작성자에게 알림을 보내는 구조를 구축할 수 있습니다.
난이도: 중간~높음
실시간 알림은 클라이언트-서버 간의 양방향 통신이 필요하며, 이를 유지하기 위한 추가적인 관리가 요구됩니다.
알림 저장(데이터베이스) 및 읽음 처리(상태 관리) 기능을 추가하면 난이도가 더 올라갑니다.

20. React 전환: 프론트엔드를 React로 마이그레이션
가능성: 높음
React는 현재 애플리케이션의 프론트엔드 요구사항과 호환 가능하며, 컴포넌트 기반 구조를 통해 더 모듈화된 코드를 작성할 수 있습니다.
서버에서 제공하던 렌더링(EJS)을 React 컴포넌트로 전환하며 API 통신 방식으로 변경해야 합니다.
난이도: 높음
EJS를 사용하는 기존 구조를 완전히 제거하고 RESTful API 기반으로 React 컴포넌트를 설계해야 합니다.
상태 관리 라이브러리(예: Redux, Context API)를 도입하고, React Router를 활용해 라우팅을 처리해야 합니다.
SSR(Server Side Rendering) 또는 CSR(Client Side Rendering) 선택에 따라 추가적인 설정이 필요할 수 있습니다.

추가 의견
이 중에서 1~3, 5, 7, 10, 12, 15번 항목은 현재 시스템에서 바로 적용하기 쉽고, 사용자 경험을 크게 향상시킬 수 있습니다.
더 어려운 기능(예: OAuth, 지도 지정, 일시 저장 등)은 단계적으로 도입하는 것을 추천합니다.

어떤 항목을 우선 구현하고 싶으신지 알려주시면 상세한 계획을 함께 세울 수 있습니다! 😊